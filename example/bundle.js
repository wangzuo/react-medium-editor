!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="/example/",t(0)}([function(e,t,i){"use strict";i(10),i(11),i(9);var n=i(3),o=i(4),r=n.createClass({displayName:"App",getInitialState:function(){return{text:"Fusce dapibus, tellus ac cursus commodo"}},render:function(){return n.createElement("div",{className:"app"},n.createElement("h1",null,"react-medium-editor"),n.createElement("h3",null,"Html content"),n.createElement("div",null,this.state.text),n.createElement("h3",null,"Editor #1 (<pre> tag)"),n.createElement(o,{tag:"pre",text:this.state.text,onChange:this.handleChange,options:{buttons:["bold","italic","underline"]}}),n.createElement("h3",null,"Editor #2"),n.createElement(o,{text:this.state.text,onChange:this.handleChange}))},handleChange:function(e){this.setState({text:e})}});n.render(n.createElement(r,null),document.getElementById("app"))},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(e,t,i){function n(e,t){for(var i=0;i<e.length;i++){var n=e[i],o=d[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(s(n.parts[r],t))}else{for(var a=[],r=0;r<n.parts.length;r++)a.push(s(n.parts[r],t));d[n.id]={id:n.id,refs:1,parts:a}}}}function o(e){for(var t=[],i={},n=0;n<e.length;n++){var o=e[n],r=o[0],a=o[1],s=o[2],l=o[3],c={css:a,media:s,sourceMap:l};i[r]?i[r].parts.push(c):t.push(i[r]={id:r,parts:[c]})}return t}function r(){var e=document.createElement("style"),t=p();return e.type="text/css",t.appendChild(e),e}function a(){var e=document.createElement("link"),t=p();return e.rel="stylesheet",t.appendChild(e),e}function s(e,t){var i,n,o;if(t.singleton){var s=b++;i=f||(f=r()),n=l.bind(null,i,s,!1),o=l.bind(null,i,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=a(),n=h.bind(null,i),o=function(){i.parentNode.removeChild(i),i.href&&URL.revokeObjectURL(i.href)}):(i=r(),n=c.bind(null,i),o=function(){i.parentNode.removeChild(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function l(e,t,i,n){var o=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function c(e,t){var i=t.css,n=t.media;t.sourceMap;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function h(e,t){var i=t.css,n=(t.media,t.sourceMap);n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([i],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}var d={},u=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=u(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=u(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,b=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m());var i=o(e);return n(i,t),function(e){for(var r=[],a=0;a<i.length;a++){var s=i[a],l=d[s.id];l.refs--,r.push(l)}if(e){var c=o(e);n(c,t)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var h=0;h<l.parts.length;h++)l.parts[h]();delete d[l.id]}}}};var g=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=React},function(e,t,i){"use strict";var n=i(3),o=i(8);e.exports=n.createClass({displayName:"MediumEditor",getInitialState:function(){return{text:this.props.text}},getDefaultProps:function(){return{tag:"div"}},componentDidMount:function(){var e=this,t=this.getDOMNode();this.medium=new o(t,this.props.options),this.medium.subscribe("editableInput",function(i){e._updated=!0,e.change(t.innerHTML)})},componentWillUnmount:function(){this.medium.destroy()},componentWillReceiveProps:function(e){e.text===this.state.text||this._updated||this.setState({text:e.text}),this._updated&&(this._updated=!1)},render:function(){return n.createElement(this.props.tag,{className:this.props.className,contentEditable:!0,dangerouslySetInnerHTML:{__html:this.state.text}})},change:function(e){this.props.onChange&&this.props.onChange(e)}})},function(e,t,i){t=e.exports=i(1)(),t.push([e.id,"*{box-sizing:border-box}body{margin:0;padding:0}.app{max-width:500px;margin:0 auto}[contenteditable=true]{padding:5px 9px;background-color:#eaeaea;border-radius:4px;outline:0}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.id,'.clearfix:after{display:block;visibility:hidden;clear:both;height:0;content:" ";font-size:0}@-webkit-keyframes pop-upwards{0%{-webkit-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0}20%{-webkit-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7}40%{-webkit-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1}100%,70%{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1}}@keyframes pop-upwards{0%{-webkit-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12);opacity:0}20%{-webkit-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2);opacity:.7}40%{-webkit-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1);opacity:1}100%,70%{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0);opacity:1}}.data-medium-element sup{vertical-align:super}.data-medium-element sub{vertical-align:sub}.data-medium-element img{max-width:100%}.medium-editor-hidden{display:none}.medium-toolbar-arrow-over:before,.medium-toolbar-arrow-under:after{position:absolute;left:50%;display:block;margin-left:-8px;width:0;height:0;border-style:solid;content:""}.medium-toolbar-arrow-under:after{border-width:8px 8px 0}.medium-toolbar-arrow-over:before{top:-8px;border-width:0 8px 8px}.medium-editor-anchor-preview,.medium-editor-toolbar{position:absolute;top:0;left:0;z-index:2000;visibility:hidden;font-size:16px;font-family:HelveticaNeue,Helvetica,Arial,sans-serif}.medium-editor-anchor-preview ul,.medium-editor-toolbar ul{margin:0;padding:0}.medium-editor-anchor-preview li,.medium-editor-toolbar li{float:left;margin:0;padding:0;list-style:none}.medium-editor-anchor-preview li button,.medium-editor-toolbar li button{display:block;margin:0;padding:15px;cursor:pointer;font-size:14px;line-height:1.33;text-decoration:none;box-sizing:border-box}.medium-editor-anchor-preview li button:focus,.medium-editor-toolbar li button:focus{outline:0}.medium-editor-anchor-preview li .medium-editor-action-underline,.medium-editor-toolbar li .medium-editor-action-underline{text-decoration:underline}.medium-editor-anchor-preview li .medium-editor-action-pre,.medium-editor-toolbar li .medium-editor-action-pre{padding:15px 0;font-weight:100;font-size:12px;font-family:Menlo,monospace}.medium-editor-anchor-preview{max-width:280px;word-break:break-all;word-wrap:break-word;text-align:center;line-height:1.4}.medium-editor-anchor-preview a{display:inline-block;margin:5px 5px 5px 10px;color:#fff}.medium-editor-anchor-preview-active,.medium-editor-toolbar-active{visibility:visible}.sticky-toolbar{position:fixed;top:1px}.medium-editor-toolbar-active.stalker-toolbar{-webkit-animation:pop-upwards 160ms forwards linear;animation:pop-upwards 160ms forwards linear}.medium-editor-action-bold{font-weight:bolder}.medium-editor-action-italic{font-style:italic}.medium-editor-toolbar-form{display:none}.medium-editor-toolbar-form a,.medium-editor-toolbar-form input{font-family:HelveticaNeue,Helvetica,Arial,sans-serif}.medium-editor-toolbar-form .medium-editor-toolbar-input,.medium-editor-toolbar-form label{margin:0;padding:6px;width:316px;border:none;font-size:14px;box-sizing:border-box}.medium-editor-toolbar-form .medium-editor-toolbar-input:focus,.medium-editor-toolbar-form label:focus{outline:0;border:none;box-shadow:none;appearance:none}.medium-editor-toolbar-form label{display:block}.medium-editor-toolbar-form a{display:inline-block;margin:0 10px;text-decoration:none;font-weight:bolder;font-size:24px}.medium-editor-placeholder{position:relative}.medium-editor-placeholder:after{position:absolute;top:0;left:0;content:attr(data-placeholder)!important;font-style:italic;white-space:pre}.medium-editor-dragover{background:#ddd}.medium-image-loading{width:40px;height:40px;background-color:#333;display:inline-block;border-radius:100%;-webkit-animation:medium-image-loading-animation 1s infinite ease-in-out;animation:medium-image-loading-animation 1s infinite ease-in-out}@-webkit-keyframes medium-image-loading-animation{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes medium-image-loading-animation{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0}}',""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.id,".medium-toolbar-arrow-under:after{top:50px;border-color:#242424 transparent transparent}.medium-toolbar-arrow-over:before{top:-8px;border-color:transparent transparent #242424}.medium-editor-toolbar{border:1px solid #000;background-color:#242424;background:-webkit-linear-gradient(top,#242424,rgba(36,36,36,.75));background:linear-gradient(to bottom,#242424,rgba(36,36,36,.75));border-radius:5px;box-shadow:0 0 3px #000}.medium-editor-toolbar li button{min-width:50px;height:50px;border:0;border-right:1px solid #000;border-left:1px solid #333;border-left:1px solid rgba(255,255,255,.1);background-color:#242424;color:#fff;background:-webkit-linear-gradient(top,#242424,rgba(36,36,36,.89));background:linear-gradient(to bottom,#242424,rgba(36,36,36,.89));box-shadow:0 2px 2px rgba(0,0,0,.3);-webkit-transition:background-color .2s ease-in;transition:background-color .2s ease-in}.medium-editor-toolbar li button:hover{background-color:#000;color:#ff0}.medium-editor-toolbar li .medium-editor-button-first{border-top-left-radius:5px;border-bottom-left-radius:5px}.medium-editor-toolbar li .medium-editor-button-last{border-top-right-radius:5px;border-bottom-right-radius:5px}.medium-editor-toolbar li .medium-editor-button-active{background-color:#000;color:#fff;background:-webkit-linear-gradient(top,#242424,rgba(0,0,0,.89));background:linear-gradient(to bottom,#242424,rgba(0,0,0,.89))}.medium-editor-toolbar-form{background:#242424;color:#999;border-radius:5px}.medium-editor-toolbar-form .medium-editor-toolbar-input{height:50px;background:#242424;color:#ccc;box-sizing:border-box}.medium-editor-toolbar-form a{color:#fff}.medium-editor-toolbar-anchor-preview{background:#242424;color:#fff;border-radius:5px}.medium-editor-placeholder:after{color:#b3b3b1}",""])},function(e,t,i){/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
"classList"in document.createElement("_")||!function(e){"use strict";if("Element"in e){var t="classList",i="prototype",n=e.Element[i],o=Object,r=String[i].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[i].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},c=function(e){for(var t=r.call(e.getAttribute("class")||""),i=t?t.split(/\s+/):[],n=0,o=i.length;o>n;n++)this.push(i[n]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},h=c[i]=[],d=function(){return new c(this)};if(s[i]=Error[i],h.item=function(e){return this[e]||null},h.contains=function(e){return e+="",-1!==l(this,e)},h.add=function(){var e,t=arguments,i=0,n=t.length,o=!1;do e=t[i]+"",-1===l(this,e)&&(this.push(e),o=!0);while(++i<n);o&&this._updateClassName()},h.remove=function(){var e,t,i=arguments,n=0,o=i.length,r=!1;do for(e=i[n]+"",t=l(this,e);-1!==t;)this.splice(t,1),r=!0,t=l(this,e);while(++n<o);r&&this._updateClassName()},h.toggle=function(e,t){e+="";var i=this.contains(e),n=i?t!==!0&&"remove":t!==!1&&"add";return n&&this[n](e),t===!0||t===!1?t:!i},h.toString=function(){return this.join(" ")},o.defineProperty){var u={get:d,enumerable:!0,configurable:!0};try{o.defineProperty(n,t,u)}catch(m){-2146823252===m.number&&(u.enumerable=!1,o.defineProperty(n,t,u))}}else o[i].__defineGetter__&&n.__defineGetter__(t,d)}}(self),/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},n=function(e,t,i){this.data=e,this.size=e.length,this.type=t,this.encoding=i},o=i.prototype,r=n.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=l.length,h=e.URL||e.webkitURL||e,d=h.createObjectURL,u=h.revokeObjectURL,m=h,p=e.btoa,f=e.atob,b=e.ArrayBuffer,g=e.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=r.fake=!0;c--;)s.prototype[l[c]]=c+1;return h.createObjectURL||(m=e.URL=function(e){var t,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=e,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(t=e.match(v),i.origin=t&&t[1])),i}),m.createObjectURL=function(e){var t,i=e.type;return null===i&&(i="application/octet-stream"),e instanceof n?(t="data:"+i,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):d?d.call(h,e):void 0},m.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&u&&u.call(h,e)},o.append=function(e){var i=this.data;if(g&&(e instanceof b||e instanceof g)){for(var o="",r=new g(e),l=0,c=r.length;c>l;l++)o+=String.fromCharCode(r[l]);i.push(o)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var h=new a;i.push(h.readAsBinaryString(e))}else e instanceof n?"base64"===e.encoding&&f?i.push(f(e.data)):"URI"===e.encoding?i.push(decodeURIComponent(e.data)):"raw"===e.encoding&&i.push(e.data):("string"!=typeof e&&(e+=""),i.push(unescape(encodeURIComponent(e))))},o.getBlob=function(e){return arguments.length||(e=null),new n(this.data.join(""),e,"raw")},o.toString=function(){return"[object BlobBuilder]"},r.slice=function(e,t,i){var o=arguments.length;return 3>o&&(i=null),new n(this.data.slice(e,o>1?t:this.data.length),i,this.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0,delete this.data},i}(e);e.Blob=function(e,t){var n=t?t.type||"":"",o=new i;if(e)for(var r=0,a=e.length;a>r;r++)Uint8Array&&e[r]instanceof Uint8Array?o.append(e[r].buffer):o.append(e[r]);var s=o.getBlob(n);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(t,i){"use strict";e.exports=i}(this,function(){"use strict";function e(e,t){return this.init(e,t)}var t;!function(e){function i(t,i,n){n||(n=e);try{for(var o=0;o<t.length;o++){var r=t[o];if(!(r in n)){if(!i)return;n[r]={}}n=n[r]}return n}catch(a){}}function n(e,t){var i,n=Array.prototype.slice.call(arguments,2);t=t||{};for(var o=0;o<n.length;o++){var r=n[o];if(r)for(i in r)r.hasOwnProperty(i)&&"undefined"!=typeof r[i]&&(e||t.hasOwnProperty(i)===!1)&&(t[i]=r[i])}return t}t={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isMac:e.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46},isMetaCtrlKey:function(e){return this.isMac&&e.metaKey||!this.isMac&&e.ctrlKey?!0:!1},isKey:function(e,t){var i=e.which;return null===i&&(i=null!==e.charCode?e.charCode:e.keyCode),!1===Array.isArray(t)?i===t:-1===t.indexOf(i)?!1:!0},parentElements:["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},derives:function(e,t){function i(){}var o=t.prototype;return i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=e,t.prototype=n(!1,t.prototype,o),t},findAdjacentTextNodeWithContent:function(e,t,i){var n,o=!1,r=i.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(n=r.nextNode();n;){if(n===t)o=!0;else if(o&&3===n.nodeType&&n.nodeValue&&n.nodeValue.trim().length>0)break;n=r.nextNode()}return n},isDescendant:function(e,t,i){if(!e||!t)return!1;if(i&&e===t)return!0;for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},now:Date.now,throttle:function(e,t){var i,n,o,r=50,a=null,s=0,l=function(){s=Date.now(),a=null,o=e.apply(i,n),a||(i=n=null)};return t||0===t||(t=r),function(){var r=Date.now(),c=t-(r-s);return i=this,n=arguments,0>=c||c>t?(a&&(clearTimeout(a),a=null),s=r,o=e.apply(i,n),a||(i=n=null)):a||(a=setTimeout(l,c)),o}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(e.getAttribute("data-medium-element"))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(e,t){var i,n,o,r,a,s,l;if(e.queryCommandSupported("insertHTML"))try{return e.execCommand("insertHTML",!1,t)}catch(c){}if(i=e.defaultView.getSelection(),i.getRangeAt&&i.rangeCount){if(n=i.getRangeAt(0),l=n.commonAncestorContainer,3===l.nodeType&&l.nodeValue===n.toString()||3!==l.nodeType&&l.innerHTML===n.toString()){for(;l.parentNode&&1===l.parentNode.childNodes.length&&!l.parentNode.getAttribute("data-medium-element");)l=l.parentNode;n.selectNode(l)}for(n.deleteContents(),o=e.createElement("div"),o.innerHTML=t,r=e.createDocumentFragment();o.firstChild;)a=o.firstChild,s=r.appendChild(a);n.insertNode(r),s&&(n=n.cloneRange(),n.setStartAfter(s),n.collapse(!0),i.removeAllRanges(),i.addRange(n))}},getSelectionRange:function(e){return this.deprecated("Util.getSelectionRange","Selection.getSelectionRange","v5.0.0"),r.getSelectionRange(e)},getSelectionStart:function(e){return this.deprecated("Util.getSelectionStart","Selection.getSelectionStart","v5.0.0"),r.getSelectionStart(e)},getSelectionData:function(e){return this.deprecated("Util.getSelectionData","Selection.getSelectionData","v5.0.0"),r.getSelectionData(e)},execFormatBlock:function(e,t){var i=r.getSelectionData(r.getSelectionStart(e));if("blockquote"===t&&i.el&&"blockquote"===i.el.parentNode.tagName.toLowerCase())return e.execCommand("outdent",!1,null);if(i.tagName===t&&(t="p"),this.isIE){if("blockquote"===t)return e.execCommand("indent",!1,t);t="<"+t+">"}return e.execCommand("formatBlock",!1,t)},setTargetBlank:function(e,t){var i,n=t||!1;if("a"===e.tagName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),i=0;i<e.length;i+=1)(!1===n||n===e[i].attributes.href.value)&&(e[i].target="_blank")},addClassToAnchors:function(e,t){var i,n,o=t.split(" ");if("a"===e.tagName.toLowerCase())for(n=0;n<o.length;n+=1)e.classList.add(o[n]);else for(e=e.getElementsByTagName("a"),i=0;i<e.length;i+=1)for(n=0;n<o.length;n+=1)e[i].classList.add(o[n])},isListItem:function(e){if(!e)return!1;if("li"===e.tagName.toLowerCase())return!0;for(var t=e.parentNode,i=t.tagName.toLowerCase();!this.isBlockContainer(t)&&"div"!==i;){if("li"===i)return!0;if(t=t.parentNode,!t||!t.tagName)return!1;i=t.tagName.toLowerCase()}return!1},cleanListDOM:function(e,t){if("li"===t.tagName.toLowerCase()){var i=t.parentElement;"p"===i.parentElement.tagName.toLowerCase()&&(this.unwrap(i.parentElement,e),r.moveCursor(e,t.firstChild,t.firstChild.textContent.length))}},unwrapElement:function(e){this.deprecated("unwrapElement","unwrap","v5.0.0"),this.unwrap(e,e.ownerDocument)},splitOffDOMTree:function(e,t,i){for(var n=t,o=null,r=!i;n!==e;){var a,s=n.parentNode,l=s.cloneNode(!1),c=r?n:s.firstChild;for(o&&(r?l.appendChild(o):a=o),o=l;c;){var h=c.nextSibling;c===n?(c.hasChildNodes()?c=c.cloneNode(!1):c.parentNode.removeChild(c),c.textContent&&o.appendChild(c),c=r?h:null):(c.parentNode.removeChild(c),(c.hasChildNodes()||c.textContent)&&o.appendChild(c),c=h)}a&&o.appendChild(a),n=s}return o},moveTextRangeIntoElement:function(e,t,i){if(!e||!t)return!1;var n=this.findCommonRoot(e,t);if(!n)return!1;if(t===e){var o=e.parentNode,r=e.nextSibling;return o.removeChild(e),i.appendChild(e),r?o.insertBefore(i,r):o.appendChild(i),i.hasChildNodes()}for(var a,s,l,c=[],h=0;h<n.childNodes.length;h++)if(l=n.childNodes[h],a){if(this.isDescendant(l,t,!0)){s=l;break}c.push(l)}else this.isDescendant(l,e,!0)&&(a=l);var d=s.nextSibling,u=n.ownerDocument.createDocumentFragment();return a===e?(a.parentNode.removeChild(a),u.appendChild(a)):u.appendChild(this.splitOffDOMTree(a,e)),c.forEach(function(e){e.parentNode.removeChild(e),u.appendChild(e)}),s===t?(s.parentNode.removeChild(s),u.appendChild(s)):u.appendChild(this.splitOffDOMTree(s,t,!0)),i.appendChild(u),s.parentNode===n?n.insertBefore(i,s):d?n.insertBefore(i,d):n.appendChild(i),i.hasChildNodes()},depthOfNode:function(e){for(var t=0,i=e;null!==i.parentNode;)i=i.parentNode,t++;return t},findCommonRoot:function(e,t){for(var i=this.depthOfNode(e),n=this.depthOfNode(t),o=e,r=t;i!==n;)i>n?(o=o.parentNode,i-=1):(r=r.parentNode,n-=1);for(;o!==r;)o=o.parentNode,r=r.parentNode;return o},isElementAtBeginningOfBlock:function(e){for(var t,i;!this.isBlockContainer(e)&&!this.isMediumEditorElement(e);){for(i=e;i=i.previousSibling;)if(t=3===i.nodeType?i.nodeValue:i.textContent,t.length>0)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&3!==e.nodeType&&!!e.getAttribute("data-medium-element")},isBlockContainer:function(e){return e&&3!==e.nodeType&&-1!==this.parentElements.indexOf(e.nodeName.toLowerCase())},getBlockContainer:function(e){return this.traverseUp(e,function(e){return t.isBlockContainer(e)&&!t.isBlockContainer(e.parentNode)})},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;for(var t=["br","col","colgroup","hr","img","input","source","wbr"];-1!==t.indexOf(e.nodeName.toLowerCase());)e=e.parentNode;if("table"===e.nodeName.toLowerCase()){var i=e.querySelector("th, td");i&&(e=i)}return e},getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var i=this.getFirstTextNode(e.childNodes[t]);if(null!==i)return i}return null},ensureUrlHasProtocol:function(e){return-1===e.indexOf("://")?"http://"+e:e},warn:function(){void 0!==e.console&&"function"==typeof e.console.warn&&e.console.warn.apply(e.console,arguments)},deprecated:function(e,i,n){var o=e+" is deprecated, please use "+i+" instead.";n&&(o+=" Will be removed in "+n),t.warn(o)},deprecatedMethod:function(e,i,n,o){t.deprecated(e,i,o),"function"==typeof this[i]&&this[i].apply(this,n)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.forEach(function(t){e.tagName.toLowerCase()===t&&e.parentNode.removeChild(e)},this)},getClosestTag:function(e,t){return this.traverseUp(e,function(e){return e.tagName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var i=t.createDocumentFragment(),n=Array.prototype.slice.call(e.childNodes),o=0;o<n.length;o++)i.appendChild(n[o]);i.childNodes.length?e.parentNode.replaceChild(i,e):e.parentNode.removeChild(e)},setObject:function(e,t,n){var o=e.split("."),r=o.pop(),a=i(o,!0,n);return a&&r?a[r]=t:void 0},getObject:function(e,t,n){return i(e?e.split("."):[],t,n)}}}(window);var i;!function(){i={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>',key:"B"},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>',key:"I"},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>',key:"U"},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},header1:{name:"header1",action:function(e){return"append-"+e.firstHeader},aria:function(e){return e.firstHeader},tagNames:function(e){return[e.firstHeader]},contentDefault:"<b>H1</b>"},header2:{name:"header2",action:function(e){return"append-"+e.secondHeader},aria:function(e){return e.secondHeader},tagNames:function(e){return[e.secondHeader]},contentDefault:"<b>H2</b>"},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'}}}();var n;!function(){n={allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableEditing:!1,autoLink:!1,toolbarAlign:"center",elementsContainer:!1,imageDragging:!0,standardizeSelectionStart:!1,contentWindow:window,ownerDocument:document,firstHeader:"h3",secondHeader:"h4",targetBlank:!1,extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",spellcheck:!0}}();var o;!function(){o=function(e){t.extend(this,e)},o.extend=function(e){var i,n=this;i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},t.extend(i,n);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,e&&t.extend(i.prototype,e),i},o.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe"].forEach(function(e){o.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}})}();var r;!function(){function e(e){return t.isBlockContainer(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}r={findMatchingSelectionParent:function(e,i){var n,o,r=i.getSelection();return 0===r.rangeCount?!1:(n=r.getRangeAt(0),o=n.commonAncestorContainer,t.traverseUp(o,e))},getSelectionElement:function(e){return this.findMatchingSelectionParent(function(e){return e.getAttribute("data-medium-element")},e)},importSelectionMoveCursorPastAnchor:function(e,i){var n=function(e){return"a"===e.nodeName.toLowerCase()};if(e.start===e.end&&3===i.startContainer.nodeType&&i.startOffset===i.startContainer.nodeValue.length&&t.traverseUp(i.startContainer,n)){for(var o=i.startContainer,r=i.startContainer.parentNode;null!==r&&"a"!==r.nodeName.toLowerCase();)r.childNodes[r.childNodes.length-1]!==o?r=null:(o=r,r=r.parentNode);if(null!==r&&"a"===r.nodeName.toLowerCase()){for(var a=null,s=0;null===a&&s<r.parentNode.childNodes.length;s++)r.parentNode.childNodes[s]===r&&(a=s);i.setStart(r.parentNode,a+1),i.collapse(!0)}}return i},getIndexRelativeToAdjacentEmptyBlocks:function(i,n,o,r){if(3===o.nodeType&&r>0)return 0;var a=o;if(3!==a.nodeType&&(a=o.childNodes[r]),a&&!t.isElementAtBeginningOfBlock(a))return 0;for(var s=i.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,e,!1),l=0;s.nextNode();){var c=""===s.currentNode.textContent;if((c||l>0)&&(l+=1),t.isDescendant(s.currentNode,o,!0))return l;c||(l=0)}return l},selectionInContentEditableFalse:function(e){var t,i=this.findMatchingSelectionParent(function(e){var i=e&&e.getAttribute("contenteditable");return"true"===i&&(t=!0),"#text"!==e.nodeName&&"false"===i},e);return!t&&i},getSelectionHtml:function(){var e,t,i,n="",o=this.options.contentWindow.getSelection();if(o.rangeCount){for(i=this.options.ownerDocument.createElement("div"),e=0,t=o.rangeCount;t>e;e+=1)i.appendChild(o.getRangeAt(e).cloneContents());n=i.innerHTML}return n},getCaretOffsets:function(e,t){var i,n;return t||(t=window.getSelection().getRangeAt(0)),i=t.cloneRange(),n=t.cloneRange(),i.selectNodeContents(e),i.setEnd(t.endContainer,t.endOffset),n.selectNodeContents(e),n.setStart(t.endContainer,t.endOffset),{left:i.toString().length,right:n.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,i,n,o=e.getSelection();if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(t=o.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(i=[],n=t.commonAncestorContainer;n.parentNode&&1===n.parentNode.childNodes.length;)i.push(n.parentNode),n=n.parentNode;return i}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"==typeof o.containsNode?o.containsNode(e,!0):!0})},selectNode:function(e,t){var i=t.createRange(),n=t.getSelection();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i)},select:function(e,t,i,n,o){e.getSelection().removeAllRanges();var r=e.createRange();return r.setStart(t,i),n?r.setEnd(n,o):r.collapse(!0),e.getSelection().addRange(r),r},moveCursor:function(e,t,i){var n,o,r=i||0;n=e.createRange(),o=e.getSelection(),n.setStart(t,r),n.collapse(!0),o.removeAllRanges(),o.addRange(n)},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,i=t&&3===t.nodeType?t.parentNode:t;return i},getSelectionData:function(e){var i;for(e&&e.tagName&&(i=e.tagName.toLowerCase());e&&!t.isBlockContainer(e);)e=e.parentNode,e&&e.tagName&&(i=e.tagName.toLowerCase());return{el:e,tagName:i}}}}();var a;!function(){a=function(e){this.base=e,this.options=this.base.options,this.events=[],this.customEvents={},this.listeners={}},a.prototype={InputEventOnContenteditableSupported:!t.isIE,attachDOMEvent:function(e,t,i,n){e.addEventListener(t,i,n),this.events.push([e,t,i,n])},detachDOMEvent:function(e,t,i,n){var o,r=this.indexOfListener(e,t,i,n);-1!==r&&(o=this.events.splice(r,1)[0],o[0].removeEventListener(o[1],o[2],o[3]))},indexOfListener:function(e,t,i,n){var o,r,a;for(o=0,r=this.events.length;r>o;o+=1)if(a=this.events[o],a[0]===e&&a[1]===t&&a[2]===i&&a[3]===n)return o;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){var i=this.indexOfCustomListener(e,t);-1!==i&&this.customEvents[e].splice(i,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,i){this.customEvents[e]&&this.customEvents[e].forEach(function(e){e(t,i)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var t=e.execCommand.listeners.indexOf(this.execCommandListener);-1!==t&&e.execCommand.listeners.splice(t,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var t=function(t,i,n){var o=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return o;var r=Array.prototype.slice.call(arguments);return e.execCommand.listeners.forEach(function(e){e({command:t,value:n,args:r,result:o})}),o};t.orig=e.execCommand,t.listeners=[],e.execCommand=t}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache=[],this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML,this.InputEventOnContenteditableSupported&&this.attachDOMEvent(e,"input",this.handleInput.bind(this))}.bind(this)),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"click",this.handleClick.bind(this))}.bind(this));break;case"editableBlur":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"blur",this.handleBlur.bind(this))}.bind(this));break;case"editableKeypress":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keypress",this.handleKeypress.bind(this))}.bind(this));break;case"editableKeyup":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keyup",this.handleKeyup.bind(this))}.bind(this));break;case"editableKeydown":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"keydown",this.handleKeydown.bind(this))}.bind(this));break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"mouseover",this.handleMouseover.bind(this))},this);break;case"editableDrag":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"dragover",this.handleDragging.bind(this)),this.attachDOMEvent(e,"dragleave",this.handleDragging.bind(this))},this);break;case"editableDrop":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"drop",this.handleDrop.bind(this))},this);break;case"editablePaste":this.base.elements.forEach(function(e){this.attachDOMEvent(e,"paste",this.handlePaste.bind(this))},this)}this.listeners[e]=!0}},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(e,i){var n,o=this.base.toolbar?this.base.toolbar.getToolbarElement():null,r=this.base.getExtensionByName("anchor-preview"),a=r&&r.getPreviewElement?r.getPreviewElement():null,s=this.base.getFocusedElement();s&&"click"===i.type&&this.lastMousedownTarget&&(t.isDescendant(s,this.lastMousedownTarget,!0)||t.isDescendant(o,this.lastMousedownTarget,!0)||t.isDescendant(a,this.lastMousedownTarget,!0))&&(n=s),n||this.base.elements.some(function(i){return!n&&t.isDescendant(i,e,!0)&&(n=i),!!n},this);var l=!t.isDescendant(s,e,!0)&&!t.isDescendant(o,e,!0)&&!t.isDescendant(a,e,!0);n!==s&&(s&&l&&(s.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,s)),n&&(n.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,n))),l&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(e,t){var i=e.getAttribute("medium-editor-index");e.innerHTML!==this.contentCache[i]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[i]=e.innerHTML},handleDocumentSelectionChange:function(e){if(e.currentTarget&&e.currentTarget.activeElement){var i,n=e.currentTarget.activeElement;this.base.elements.some(function(e){return t.isDescendant(e,n,!0)?(i=e,!0):!1},this),i&&this.updateInput(i,{target:n,currentTarget:i})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var t={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(e){return this.triggerCustomEvent("editableKeydown",e,e.currentTarget),t.isKey(e,t.keyCode.ENTER)?this.triggerCustomEvent("editableKeydownEnter",e,e.currentTarget):t.isKey(e,t.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",e,e.currentTarget):t.isKey(e,[t.keyCode.DELETE,t.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",e,e.currentTarget):void 0}}}();var s;!function(){s=function(e,i){t.deprecated("MediumEditor.statics.DefaultButton","MediumEditor.extensions.button","v5.0.0"),this.options=e,this.name=e.name,this.init(i)},s.prototype={init:function(e){this.base=e,this.button=this.createButton(),this.base.on(this.button,"click",this.handleClick.bind(this)),this.options.key&&this.base.subscribe("editableKeydown",this.handleKeydown.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.options.action?this.options.action(this.base.options):this.options.action},getAria:function(){return"function"==typeof this.options.aria?this.options.aria(this.base.options):this.options.aria},getTagNames:function(){return"function"==typeof this.options.tagNames?this.options.tagNames(this.base.options):this.options.tagNames},createButton:function(){var e=this.base.options.ownerDocument.createElement("button"),t=this.options.contentDefault,i=this.getAria();return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),e.setAttribute("data-action",this.getAction()),i&&(e.setAttribute("title",i),e.setAttribute("aria-label",i)),this.base.options.buttonLabels&&("fontawesome"===this.base.options.buttonLabels&&this.options.contentFA?t=this.options.contentFA:"object"==typeof this.base.options.buttonLabels&&this.base.options.buttonLabels[this.name]&&(t=this.base.options.buttonLabels[this.options.name])),e.innerHTML=t,e},handleKeydown:function(e){var i,n=String.fromCharCode(e.which||e.keyCode).toLowerCase();this.options.key===n&&t.isMetaCtrlKey(e)&&(e.preventDefault(),e.stopPropagation(),i=this.getAction(),i&&this.base.execAction(i))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.base.execAction(t)},isActive:function(){return this.button.classList.contains(this.base.options.activeButtonClass)},setInactive:function(){this.button.classList.remove(this.base.options.activeButtonClass),delete this.knownState},setActive:function(){this.button.classList.add(this.base.options.activeButtonClass),delete this.knownState},queryCommandState:function(){var e=null;return this.options.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,i,n=!1,o=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&e.tagName&&(n=-1!==o.indexOf(e.tagName.toLowerCase())),!n&&this.options.style&&(t=this.options.style.value.split("|"),i=this.base.options.contentWindow.getComputedStyle(e,null).getPropertyValue(this.options.style.prop),t.forEach(function(e){this.knownState||(n=-1!==i.indexOf(e),(n||"text-decoration"!==this.options.style.prop)&&(this.knownState=n))},this)),n)}}}();var l;!function(){function e(){t.deprecated("MediumEditor.statics.AnchorExtension","MediumEditor.extensions.anchor","v5.0.0"),this.parent=!0,this.options={name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',key:"k"},this.name="anchor",this.hasForm=!0}e.prototype={formSaveLabel:"&#10003;",formCloseLabel:"&times;",handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=r.getSelectedParentElement(r.getSelectionRange(this.base.options.ownerDocument));return t.tagName&&"a"===t.tagName.toLowerCase()?this.base.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){var i=String.fromCharCode(e.which||e.keyCode).toLowerCase();
this.options.key===i&&t.isMetaCtrlKey(e)&&(e.preventDefault(),e.stopPropagation(),this.handleClick(e))},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.base.options.anchorInputPlaceholder,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.base.options.anchorTarget&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.base.options.anchorInputCheckboxLabel,"</label>"),this.base.options.anchorButton&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>Button</label>"),e.join("")},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),t.value=e||"",t.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},getFormOpts:function(){var e=this.getForm().querySelector(".medium-editor-toolbar-anchor-target"),t=this.getForm().querySelector(".medium-editor-toolbar-anchor-button"),i={url:this.getInput().value};return this.base.options.checkLinkFormat&&(i.url=this.checkLinkFormat(i.url)),e&&e.checked?i.target="_blank":i.target="_self",t&&t.checked&&(i.buttonClass=this.base.options.anchorButtonClass),i},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.base.createLink(e),this.base.checkSelection()},checkLinkFormat:function(e){var t=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(t.test(e)?"":"http://")+e},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),i=e.querySelector(".medium-editor-toolbar-save"),n=e.querySelector(".medium-editor-toolbar-input");this.base.on(e,"click",this.handleFormClick.bind(this)),this.base.on(n,"keyup",this.handleTextboxKeyup.bind(this)),this.base.on(t,"click",this.handleCloseClick.bind(this)),this.base.on(i,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.base.options.ownerDocument,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.base.id,t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},handleTextboxKeyup:function(e){return e.keyCode===t.keyCode.ENTER?(e.preventDefault(),void this.doFormSave()):void(e.keyCode===t.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}},l=t.derives(s,e)}();var c;!function(){c=function(){t.deprecated("MediumEditor.statics.AnchorPreview","MediumEditor.extensions.anchorPreview","v5.0.0"),this.parent=!0,this.name="anchor-preview"},c.prototype={previewValueSelector:"a",init:function(){this.anchorPreview=this.createPreview(),this.base.options.elementsContainer.appendChild(this.anchorPreview),this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.base.options.ownerDocument.createElement("div");return e.id="medium-editor-anchor-preview-"+this.base.id,e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.base.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},deactivate:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||e.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(){var e,t,i=this.anchorPreview.offsetHeight,n=this.activeAnchor.getBoundingClientRect(),o=(n.left+n.right)/2;e=this.anchorPreview.offsetWidth/2,t=this.base.options.diffLeft-e,this.anchorPreview.style.top=Math.round(i+n.bottom-this.base.options.diffTop+this.base.options.contentWindow.pageYOffset-this.anchorPreview.offsetHeight)+"px",e>o?this.anchorPreview.style.left=t+e+"px":this.base.options.contentWindow.innerWidth-o<e?this.anchorPreview.style.left=this.base.options.contentWindow.innerWidth+t-e+"px":this.anchorPreview.style.left=t+o+"px"},attachToEditables:function(){this.base.subscribe("editableMouseover",this.handleEditableMouseover.bind(this))},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),i=this.activeAnchor;t&&i&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){i&&(t.showForm(i.attributes.href.value),i=null)}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.base.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var i=t.getClosestTag(e.target,"a");if(i){if(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML))return!0;if(this.base.toolbar&&this.base.toolbar.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.base.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.base.options.anchorPreviewHideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.base.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.base.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.base.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.base.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.base.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}}}();var h;!function(){function e(){t.deprecated("MediumEditor.statics.FontSizeExtension","MediumEditor.extensions.fontSize","v5.0.0"),this.parent=!0,this.options={name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>'},this.name="fontsize",this.hasForm=!0}e.prototype={handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.base.options.ownerDocument.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),t.value=e||"",t.focus()},deactivate:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.base.options.ownerDocument,t=e.createElement("div"),i=e.createElement("input"),n=e.createElement("a"),o=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.base.id,this.base.on(t,"click",this.handleFormClick.bind(this)),i.setAttribute("type","range"),i.setAttribute("min","1"),i.setAttribute("max","7"),i.className="medium-editor-toolbar-input",t.appendChild(i),this.base.on(i,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(o),this.base.on(o,"click",this.handleSaveClick.bind(this),!0),n.setAttribute("href","#"),n.className="medium-editor-toobar-close",n.innerHTML="fontawesome"===this.base.options.buttonLabels?'<i class="fa fa-times"></i>':"&times;",t.appendChild(n),this.base.on(n,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){r.getSelectedElements(this.base.options.ownerDocument).forEach(function(e){"FONT"===e.tagName&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.base.execAction("fontSize",{size:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}},h=t.derives(s,e)}();var d;!function(){d=o.extend({init:function(){this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this)),this.key&&this.subscribe("editableKeydown",this.handleKeydown.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,i=this.getAria(),n=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),e.setAttribute("data-action",this.getAction()),i&&(e.setAttribute("title",i),e.setAttribute("aria-label",i)),n&&("fontawesome"===n&&this.contentFA?t=this.contentFA:"object"==typeof n&&n[this.name]&&(t=n[this.name])),e.innerHTML=t,e},handleKeydown:function(e){var i;t.isKey(e,this.key.charCodeAt(0))&&t.isMetaCtrlKey(e)&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),i=this.getAction(),i&&this.execAction(i))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,i,n=!1,o=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&e.tagName&&(n=-1!==o.indexOf(e.tagName.toLowerCase())),!n&&this.style&&(t=this.style.value.split("|"),i=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),t.forEach(function(e){this.knownState||(n=-1!==i.indexOf(e),(n||"text-decoration"!==this.style.prop)&&(this.knownState=n))},this)),n)}})}();var u;!function(){var e=function(){};u=d.extend({formSaveLabel:"&#10003;",formCloseLabel:"&times;",hasForm:!0,getForm:e,isDisplayed:e,hideForm:e})}();var m;!function(){m=u.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',key:"K",handleClick:function(e){e.preventDefault(),e.stopPropagation();var i=r.getSelectionRange(this.document);return"a"===i.startContainer.nodeName.toLowerCase()||"a"===i.endContainer.nodeName.toLowerCase()||t.getClosestTag(r.getSelectedParentElement(i),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){t.isKey(e,this.key.charCodeAt(0))&&t.isMetaCtrlKey(e)&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>"),this.customClassOption&&e.push('<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>"),e.join("")},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},deactivate:function(){t.deprecatedMethod.call(this,"deactivate","destroy",arguments,"v5.0.0")},getFormOpts:function(){var e=this.getForm().querySelector(".medium-editor-toolbar-anchor-target"),t=this.getForm().querySelector(".medium-editor-toolbar-anchor-button"),i={url:this.getInput().value};return this.linkValidation&&(i.url=this.checkLinkFormat(i.url)),i.target="_self",e&&e.checked&&(i.target="_blank"),t&&t.checked&&(i.buttonClass=this.customClassOption),i},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},checkLinkFormat:function(e){var t=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(t.test(e)?"":"http://")+e},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),i=e.querySelector(".medium-editor-toolbar-save"),n=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(n,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(i,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},handleTextboxKeyup:function(e){return e.keyCode===t.keyCode.ENTER?(e.preventDefault(),void this.doFormSave()):void(e.keyCode===t.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}})}();var p;!function(){p=o.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",diffLeft:0,diffTop:-10,elementsContainer:!1,init:function(){this.anchorPreview=this.createPreview(),this.elementsContainer||(this.elementsContainer=this.document.body),this.elementsContainer.appendChild(this.anchorPreview),this.attachToEditables()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},deactivate:function(){t.deprecatedMethod.call(this,"deactivate","destroy",arguments,"v5.0.0")},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||e.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(){var e,t,i=this.anchorPreview.offsetHeight,n=this.activeAnchor.getBoundingClientRect(),o=(n.left+n.right)/2;e=this.anchorPreview.offsetWidth/2,t=this.diffLeft-e,this.anchorPreview.style.top=Math.round(i+n.bottom-this.diffTop+this.window.pageYOffset-this.anchorPreview.offsetHeight)+"px",e>o?this.anchorPreview.style.left=t+e+"px":this.window.innerWidth-o<e?this.anchorPreview.style.left=this.window.innerWidth+t-e+"px":this.anchorPreview.style.left=t+o+"px"},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this))},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),i=this.activeAnchor;t&&i&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){i&&(t.showForm(i.attributes.href.value),i=null)}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var i=t.getClosestTag(e.target,"a");if(!1!==i){if(!/href=["']\S+["']/.test(i.outerHTML)||/href=["']#\S+["']/.test(i.outerHTML))return!0;if(this.base.toolbar&&this.base.toolbar.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==i&&this.detachPreviewHandlers(),this.anchorToPreview=i,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}})}();var f,b,g,v;b=[" ","	","\n","\r","","","","","","\u2028","\u2029"],g="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",v="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+g+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+g+"))",function(){function e(e){return!t.getClosestTag(e,"a")}var i=new RegExp("^("+g+")$","i");f=o.extend({init:function(){this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(e){this.disableEventHandling||t.isKey(e,[t.keyCode.SPACE,t.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var t=this.base.exportSelection();this.performLinking(e.target)&&this.base.importSelection(t,!0)}catch(i){window.console&&window.console.error("Failed to perform linking",i),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(e){var t=e.querySelectorAll("p"),i=!1;0===t.length&&(t=[e]);for(var n=0;n<t.length;n++)i=this.removeObsoleteAutoLinkSpans(t[n])||i,i=this.performLinkingWithinElement(t[n])||i;return i},splitStartNodeIfNeeded:function(e,t,i){return t!==i?e.splitText(t-i):null},splitEndNodeIfNeeded:function(e,t,i,n){var o,r;o=n+(t||e).nodeValue.length+(t?e.nodeValue.length:0)-1,r=(t||e).nodeValue.length-(o+1-i),o>=i&&n!==o&&0!==r&&(t||e).splitText(r)},removeObsoleteAutoLinkSpans:function(i){for(var n=i.querySelectorAll('span[data-auto-link="true"]'),o=!1,r=0;r<n.length;r++){var a=n[r].textContent;if(-1===a.indexOf("://")&&(a=t.ensureUrlHasProtocol(a)),n[r].getAttribute("data-href")!==a&&e(n[r])){o=!0;var s=a.replace(/\s+$/,"");if(n[r].getAttribute("data-href")===s){var l=a.length-s.length,c=t.splitOffDOMTree(n[r],this.splitTextBeforeEnd(n[r],l));n[r].parentNode.insertBefore(c,n[r].nextSibling)}else t.unwrap(n[r],this.document)}}return o},splitTextBeforeEnd:function(e,t){for(var i=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),n=!0;n;)n=null!==i.lastChild();for(var o,r,a;t>0&&null!==a;)o=i.currentNode,r=o.nodeValue,r.length>t?(a=o.splitText(r.length-t),t=0):(a=i.previousNode(),t-=r.length);return a},performLinkingWithinElement:function(e){for(var t=this.findLinkableText(e),i=!1,n=0;n<t.length;n++)i=this.createLink(this.findOrCreateMatchingTextNodes(e,t[n]),t[n].href)||i;return i},findLinkableText:function(e){for(var t=new RegExp(v,"gi"),n=e.textContent,o=null,r=[];null!==(o=t.exec(n));){var a=!0,s=o.index+o[0].length;a=!(0!==o.index&&-1===b.indexOf(n[o.index-1])||s!==n.length&&-1===b.indexOf(n[s])),a=a&&(-1!==o[0].indexOf("/")||i.test(o[0].split(".").pop().split("?").shift())),a&&r.push({href:o[0],start:o.index,end:s})}return r},findOrCreateMatchingTextNodes:function(e,t){for(var i=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),n=[],o=0,r=!1,a=null,s=null;null!==(a=i.nextNode())&&(!r&&t.start<o+a.nodeValue.length&&(r=!0,s=this.splitStartNodeIfNeeded(a,t.start,o)),r&&this.splitEndNodeIfNeeded(a,s,t.end,o),!r||o!==t.end);){if(r&&o>t.end+1)throw new Error("PerformLinking overshot the target!");r&&n.push(s||a),o+=a.nodeValue.length,null!==s&&(o+=s.nodeValue.length,i.nextNode()),s=null}return n},createLink:function(e,i){for(var n=!1,o=0;o<e.length&&n===!1;o++)n=!!t.traverseUp(e[o],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});if(n)return!1;var r=this.document.createElement("a"),a=this.document.createElement("span"),s=t.ensureUrlHasProtocol(i);return t.moveTextRangeIntoElement(e[0],e[e.length-1],a),a.setAttribute("data-auto-link","true"),a.setAttribute("data-href",s),r.setAttribute("href",s),a.parentNode.insertBefore(r,a),r.appendChild(a),!0}})}();var w;!function(){w=o.extend({init:function(){this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)},handleDrop:function(e){var i,n="medium-editor-dragover";e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(i=Array.prototype.slice.call(e.dataTransfer.files,0),i.some(function(e){if(e.type.match("image")){var i,n;i=new FileReader,i.readAsDataURL(e),n="medium-img-"+ +new Date,t.insertHTMLCommand(this.document,'<img class="medium-image-loading" id="'+n+'" />'),i.onload=function(){var e=this.document.getElementById(n);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=i.result)}.bind(this)}}.bind(this))),e.target.classList.remove(n)}})}();var y;!function(){y=u.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.base.hideToolbarDefaultActions(),this.getForm().style.display="block",this.base.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return this.form?(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form):!1},deactivate:function(){t.deprecatedMethod.call(this,"deactivate","destroy",arguments,"v5.0.0")},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),i=e.createElement("input"),n=e.createElement("a"),o=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),i.setAttribute("type","range"),i.setAttribute("min","1"),i.setAttribute("max","7"),i.className="medium-editor-toolbar-input",t.appendChild(i),this.on(i,"change",this.handleSliderChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),n.setAttribute("href","#"),n.className="medium-editor-toobar-close",n.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(n),this.on(n,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){r.getSelectedElements(this.document).forEach(function(e){"FONT"===e.tagName&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{size:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}})}();var C;!function(){function e(){return[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""]];
}C=o.extend({forcePlainText:!0,cleanPastedHTML:!1,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],targetBlank:!1,disableReturn:!1,init:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.subscribe("editablePaste",this.handlePaste.bind(this))},handlePaste:function(e,i){var n,o,r,a,s="",l="text/html",c="text/plain";if(this.window.clipboardData&&void 0===e.clipboardData&&(e.clipboardData=this.window.clipboardData,l="Text",c="Text"),e.clipboardData&&e.clipboardData.getData&&!e.defaultPrevented){if(e.preventDefault(),r=e.clipboardData.getData(l),a=e.clipboardData.getData(c),this.cleanPastedHTML&&r)return this.cleanPaste(r);if(this.disableReturn||i.getAttribute("data-disable-return"))s=t.htmlEntities(a);else if(n=a.split(/[\r\n]+/g),n.length>1)for(o=0;o<n.length;o+=1)""!==n[o]&&(s+="<p>"+t.htmlEntities(n[o])+"</p>");else s=t.htmlEntities(n[0]);t.insertHTMLCommand(this.document,s)}},cleanPaste:function(t){var i,n,o=/<p|<br|<div/.test(t),r=e().concat(this.cleanReplacements||[]);for(i=0;i<r.length;i+=1)t=t.replace(r[i][0],r[i][1]);return o?(n=t.split("<br><br>"),void this.pasteHTML("<p>"+n.join("</p><p>")+"</p>")):this.pasteHTML(t)},pasteHTML:function(e,i){i=t.defaults({},i,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var n,o,r,a,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),a=s.querySelector("body"),a.innerHTML=e,this.cleanupSpans(a),n=a.querySelectorAll("*"),r=0;r<n.length;r+=1)o=n[r],"a"===o.tagName.toLowerCase()&&this.targetBlank&&t.setTargetBlank(o),t.cleanupAttrs(o,i.cleanAttrs),t.cleanupTags(o,i.cleanTags);for(n=a.querySelectorAll("a,p,div,br"),r=0;r<n.length;r+=1)switch(o=n[r],o.innerHTML=o.innerHTML.replace(/\n/gi," "),o.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}t.insertHTMLCommand(this.document,a.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(e){var i,n,o,r=e.querySelectorAll(".replace-with"),a=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(i=0;i<r.length;i+=1)n=r[i],o=this.document.createElement(n.classList.contains("bold")?"b":"i"),n.classList.contains("bold")&&n.classList.contains("italic")?o.innerHTML="<i>"+n.innerHTML+"</i>":o.innerHTML=n.innerHTML,n.parentNode.replaceChild(o,n);for(r=e.querySelectorAll("span"),i=0;i<r.length;i+=1){if(n=r[i],t.traverseUp(n,a))return!1;t.unwrap(n,this.document)}}})}();var E;!function(){E=o.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},this)},destroy:function(){this.getEditorElements().forEach(function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},this)},showPlaceholder:function(e){e&&e.classList.add("medium-editor-placeholder")},hidePlaceholder:function(e){e&&e.classList.remove("medium-editor-placeholder")},updatePlaceholder:function(e){return e.querySelector("img, blockquote, ul, ol")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?void this.hidePlaceholder(e):this.showPlaceholder(e)},attachEventHandlers:function(){this.subscribe("blur",this.handleExternalInteraction.bind(this)),this.subscribe("editableBlur",this.handleBlur.bind(this)),this.hideOnClick?this.subscribe("editableClick",this.handleHidePlaceholderEvent.bind(this)):this.subscribe("editableKeyup",this.handleBlur.bind(this)),this.subscribe("editableKeypress",this.handleHidePlaceholderEvent.bind(this)),this.subscribe("editablePaste",this.handleHidePlaceholderEvent.bind(this))},handleHidePlaceholderEvent:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)},handleExternalInteraction:function(){this.initPlaceholders()}})}();var x;!function(){x=function(e){this.base=e,this.options=e.options,this.initThrottledMethods()},x.prototype={createToolbar:function(){var e=this.base.options.ownerDocument.createElement("div");return e.id="medium-editor-toolbar-"+this.base.id,e.className="medium-editor-toolbar",this.options.staticToolbar?e.className+=" static-toolbar":e.className+=" stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.base.commands.forEach(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var e,i,n,o,r=this.base.options.ownerDocument.createElement("ul");return r.id="medium-editor-toolbar-actions"+this.base.id,r.className="medium-editor-toolbar-actions clearfix",r.style.display="block",this.base.options.buttons.forEach(function(n){o=this.base.getExtensionByName(n),"function"==typeof o.getButton&&(i=o.getButton(this.base),e=this.base.options.ownerDocument.createElement("li"),t.isElement(i)?e.appendChild(i):e.innerHTML=i,r.appendChild(e))}.bind(this)),n=r.querySelectorAll("button"),n.length>0&&(n[0].classList.add(this.options.firstButtonClass),n[n.length-1].classList.add(this.options.lastButtonClass)),r},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},deactivate:function(){t.deprecatedMethod.call(this,"deactivate","destroy",arguments,"v5.0.0")},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=t.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.base.subscribe("blur",this.handleBlur.bind(this)),this.base.subscribe("focus",this.handleFocus.bind(this)),this.base.subscribe("editableClick",this.handleEditableClick.bind(this)),this.base.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.base.on(this.options.ownerDocument.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.options.staticToolbar&&this.options.stickyToolbar&&this.base.on(this.options.contentWindow,"scroll",this.handleWindowScroll.bind(this),!0),this.base.on(this.options.contentWindow,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){return e&&e.target&&t.isDescendant(this.getToolbarElement(),e.target)?!1:void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.base.trigger("showToolbar",{},this.base.getFocusedElement()),"function"==typeof this.options.onShowToolbar&&(t.deprecated("onShowToolbar","the showToolbar custom event","v5.0.0"),this.options.onShowToolbar()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.base.trigger("hideToolbar",{},this.base.getFocusedElement()),this.base.commands.forEach(function(e){"function"==typeof e.onHide&&(t.deprecated("onHide","the hideToolbar custom event","v5.0.0"),e.onHide())}),"function"==typeof this.options.onHideToolbar&&(t.deprecated("onHideToolbar","the hideToolbar custom event","v5.0.0"),this.options.onHideToolbar()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.base.commands.forEach(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var e=/<[^\/>][^>]*><\/[^>]+>/gim,i=new RegExp("<("+t.parentElements.join("|")+")[^>]*>","g"),n=r.getSelectionHtml.call(this).replace(e,""),o=n.match(i);return!!o&&o.length>1},modifySelection:function(){var e=this.options.contentWindow.getSelection(),i=e.getRangeAt(0);if(this.options.standardizeSelectionStart&&i.startContainer.nodeValue&&i.startOffset===i.startContainer.nodeValue.length){var n=t.findAdjacentTextNodeWithContent(r.getSelectionElement(this.options.contentWindow),i.startContainer,this.options.ownerDocument);if(n){for(var o=0;0===n.nodeValue.substr(o,1).trim().length;)o+=1;var a=this.options.ownerDocument.createRange();a.setStart(n,o),a.setEnd(i.endContainer,i.endOffset),e.removeAllRanges(),e.addRange(a),i=a}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||r.selectionInContentEditableFalse(this.options.contentWindow))return this.hideToolbar();var e=r.getSelectionElement(this.options.contentWindow);return!e||-1===this.base.elements.indexOf(e)||e.getAttribute("data-disable-toolbar")?this.hideToolbar():this.options.updateOnEmptySelection&&this.options.staticToolbar?this.showAndUpdateToolbar():""===this.options.contentWindow.getSelection().toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},getFocusedElement:function(){return this.base.getFocusedElement()},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.base.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.base.commands.forEach(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}.bind(this)),this.checkActiveButtons()},checkActiveButtons:function(){var e,i=[],n=null,o=r.getSelectionRange(this.options.ownerDocument),a=function(t){"function"==typeof t.checkState?t.checkState(e):"function"==typeof t.isActive&&"function"==typeof t.isAlreadyApplied&&"function"==typeof t.setActive&&!t.isActive()&&t.isAlreadyApplied(e)&&t.setActive()};if(o)for(e=r.getSelectedParentElement(o),this.base.commands.forEach(function(e){return"function"==typeof e.queryCommandState&&(n=e.queryCommandState(),null!==n)?void(n&&"function"==typeof e.setActive&&e.setActive()):void i.push(e)});void 0!==e.tagName&&-1===t.parentElements.indexOf(e.tagName.toLowerCase)&&(i.forEach(a),-1===this.base.elements.indexOf(e));)e=e.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e,t=this.base.getFocusedElement(),i=this.options.contentWindow.getSelection();return t?(this.options.staticToolbar?(this.showToolbar(),this.positionStaticToolbar(t)):i.isCollapsed||(this.showToolbar(),this.positionToolbar(i)),e=this.base.getExtensionByName("anchor-preview"),void(e&&"function"==typeof e.hidePreview&&e.hidePreview())):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,i=this.options.ownerDocument.documentElement&&this.options.ownerDocument.documentElement.scrollTop||this.options.ownerDocument.body.scrollTop,n=this.options.contentWindow.innerWidth,o=this.getToolbarElement(),r=e.getBoundingClientRect(),a=r.top+i,s=r.left+r.width/2,l=o.offsetHeight,c=o.offsetWidth,h=c/2;switch(this.options.stickyToolbar?i>a+e.offsetHeight-l?(o.style.top=a+e.offsetHeight-l+"px",o.classList.remove("sticky-toolbar")):i>a-l?(o.classList.add("sticky-toolbar"),o.style.top="0px"):(o.classList.remove("sticky-toolbar"),o.style.top=a-l+"px"):o.style.top=a-l+"px",this.options.toolbarAlign){case"left":t=r.left;break;case"right":t=r.right-c;break;case"center":t=s-h}0>t?t=0:t+c>n&&(t=n-Math.ceil(c)-1),o.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0";var t=this.options.contentWindow.innerWidth,i=e.getRangeAt(0),n=i.getBoundingClientRect(),o=(n.left+n.right)/2,r=this.getToolbarElement(),a=r.offsetHeight,s=r.offsetWidth,l=s/2,c=50,h=this.options.diffLeft-l;n.top<c?(r.classList.add("medium-toolbar-arrow-over"),r.classList.remove("medium-toolbar-arrow-under"),r.style.top=c+n.bottom-this.options.diffTop+this.options.contentWindow.pageYOffset-a+"px"):(r.classList.add("medium-toolbar-arrow-under"),r.classList.remove("medium-toolbar-arrow-over"),r.style.top=n.top+this.options.diffTop+this.options.contentWindow.pageYOffset-a+"px"),l>o?r.style.left=h+l+"px":l>t-o?r.style.left=t+h-l+"px":r.style.left=h+o+"px"}}}();var k;return function(){k={button:d,form:u,anchor:m,anchorPreview:p,autoLink:f,fontSize:y,imageDragging:w,paste:C,placeholder:E}}(),function(){function d(e,t){if(this.options.disableReturn||t.getAttribute("data-disable-return"))e.preventDefault();else if(this.options.disableDoubleReturn||t.getAttribute("data-disable-double-return")){var i=r.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()||i.previousElementSibling&&""===i.previousElementSibling.textContent.trim())&&e.preventDefault()}}function u(e){var i=r.getSelectionStart(this.options.ownerDocument),n=i&&i.tagName.toLowerCase();"pre"===n&&(e.preventDefault(),t.insertHTMLCommand(this.options.ownerDocument,"    ")),t.isListItem(i)&&(e.preventDefault(),e.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function m(e){var i,n=r.getSelectionStart(this.options.ownerDocument),o=n.tagName.toLowerCase(),a=/^(\s+|<br\/?>)?$/i,s=/h\d/i;t.isKey(e,[t.keyCode.BACKSPACE,t.keyCode.ENTER])&&n.previousElementSibling&&s.test(o)&&0===r.getCaretOffsets(n).left?t.isKey(e,t.keyCode.BACKSPACE)&&a.test(n.previousElementSibling.innerHTML)?(n.previousElementSibling.parentNode.removeChild(n.previousElementSibling),e.preventDefault()):t.isKey(e,t.keyCode.ENTER)&&(i=this.options.ownerDocument.createElement("p"),i.innerHTML="<br>",n.previousElementSibling.parentNode.insertBefore(i,n),e.preventDefault()):t.isKey(e,t.keyCode.DELETE)&&n.nextElementSibling&&n.previousElementSibling&&!s.test(o)&&a.test(n.innerHTML)&&s.test(n.nextElementSibling.tagName)?(r.moveCursor(this.options.ownerDocument,n.nextElementSibling),n.previousElementSibling.parentNode.removeChild(n),e.preventDefault()):t.isKey(e,t.keyCode.BACKSPACE)&&"li"===o&&a.test(n.innerHTML)&&!n.previousElementSibling&&!n.parentElement.previousElementSibling&&n.nextElementSibling&&"li"===n.nextElementSibling.tagName.toLowerCase()&&(i=this.options.ownerDocument.createElement("p"),i.innerHTML="<br>",n.parentElement.parentElement.insertBefore(i,n.parentElement),r.moveCursor(this.options.ownerDocument,i),n.parentElement.removeChild(n),e.preventDefault())}function p(e){var i,n=r.getSelectionStart(this.options.ownerDocument);n&&(n.getAttribute("data-medium-element")&&0===n.children.length&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),t.isKey(e,t.keyCode.ENTER)&&!t.isListItem(n)&&(i=n.tagName.toLowerCase(),"a"===i?this.options.ownerDocument.execCommand("unlink",!1,null):e.shiftKey||e.ctrlKey||/h\d/.test(i)||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function f(e){e||(e=[]),"string"==typeof e&&(e=this.options.ownerDocument.querySelectorAll(e)),t.isElement(e)&&(e=[e]);var i=Array.prototype.slice.apply(e);this.elements=[],i.forEach(function(e,t){"textarea"===e.tagName.toLowerCase()?this.elements.push(E.call(this,e,t)):this.elements.push(e)},this)}function b(e,t){return Object.keys(t).forEach(function(i){void 0===e[i]&&(e[i]=t[i])}),e}function g(e,i,n){"undefined"!=typeof e.parent&&t.warn("Extension .parent property has been deprecated.  The .base property for extensions will always be set to MediumEditor in version 5.0.0");var o={window:n.options.contentWindow,document:n.options.ownerDocument};return e.parent!==!1&&(o.base=n),e=b(e,o),"function"==typeof e.init&&e.init(n),e.name||(e.name=i),e}function v(){var e,t=!1;if(this.options.disableAnchorPreview)return!1;if(this.options.anchorPreview===!1)return!1;if(this.options.extensions["anchor-preview"])return!1;if(this.options.disableToolbar)return!1;for(e=0;e<this.elements.length;e+=1)if(!this.elements[e].getAttribute("data-disable-toolbar")){t=!0;break}return t}function w(){return this.options.extensions.placeholder?!1:this.options.disablePlaceholders?!1:this.options.placeholder!==!1}function y(){return this.options.extensions["auto-link"]?!1:this.options.autoLink!==!1}function C(){return this.options.extensions["image-dragging"]?!1:this.options.imageDragging!==!1}function E(e,t){var i=this.options.ownerDocument.createElement("div"),n="medium-editor-"+Date.now()+"-"+t,o=["data-disable-editing","data-disable-toolbar","data-placeholder","data-disable-return","data-disable-double-return","data-disable-preview","spellcheck"];return i.className=e.className,i.id=n,i.innerHTML=e.value,i.setAttribute("medium-editor-textarea-id",t),o.forEach(function(t){e.hasAttribute(t)&&i.setAttribute(t,e.getAttribute(t))}),e.classList.add("medium-editor-hidden"),e.setAttribute("medium-editor-textarea-id",t),e.parentNode.insertBefore(i,e),i}function S(){this.elements.forEach(function(e,t){this.options.disableEditing||e.getAttribute("data-disable-editing")||(e.setAttribute("contentEditable",!0),e.setAttribute("spellcheck",this.options.spellcheck)),e.setAttribute("data-medium-element",!0),e.setAttribute("role","textbox"),e.setAttribute("aria-multiline",!0),e.setAttribute("medium-editor-index",t),e.hasAttribute("medium-editor-textarea-id")&&this.on(e,"input",function(e){var t=e.target,i=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');i&&(i.value=this.serialize()[t.id].value)}.bind(this))},this)}function T(){if(this.toolbar||this.options.disableToolbar)return!1;var e=this.elements.some(function(e){return!e.getAttribute("data-disable-toolbar")});e&&(this.toolbar=new x(this),this.options.elementsContainer.appendChild(this.toolbar.getToolbarElement()))}function A(){var e;if(this.subscribe("editableKeydownTab",u.bind(this)),this.subscribe("editableKeydownDelete",m.bind(this)),this.subscribe("editableKeydownEnter",m.bind(this)),this.options.disableReturn||this.options.disableDoubleReturn)this.subscribe("editableKeydownEnter",d.bind(this));else for(e=0;e<this.elements.length;e+=1)if(this.elements[e].getAttribute("data-disable-return")||this.elements[e].getAttribute("data-disable-double-return")){this.subscribe("editableKeydownEnter",d.bind(this));break}this.options.disableReturn||this.elements.forEach(function(e){e.getAttribute("data-disable-return")||this.on(e,"keyup",p.bind(this))},this)}function N(i){var n={text:"string"==typeof this.options.placeholder?this.options.placeholder:void 0};return new e.extensions.placeholder(t.extend({},i,n))}function D(i){var n={hideDelay:this.options.anchorPreviewHideDelay,diffLeft:this.options.diffLeft,diffTop:this.options.diffTop,elementsContainer:this.options.elementsContainer};return new e.extensions.anchorPreview(t.extend({},i,n))}function L(i){var n={customClassOption:this.options.anchorButton?this.options.anchorButtonClass||"btn":void 0,linkValidation:this.options.checkLinkFormat,placeholderText:this.options.anchorInputPlaceholder,targetCheckbox:this.options.anchorTarget,targetCheckboxText:this.options.anchorInputCheckboxLabel};return new e.extensions.anchor(t.extend({},i,n))}function P(i){var n={forcePlainText:this.options.forcePlainText,cleanPastedHTML:this.options.cleanPastedHTML,disableReturn:this.options.disableReturn,targetBlank:this.options.targetBlank};return new e.extensions.paste(t.extend({},i,n))}function M(){var t,n,o=this.options.buttons,r=this.options.extensions;this.commands=[],o.forEach(function(n){r[n]?(t=g(r[n],n,this),this.commands.push(t)):"anchor"===n?(t=g(L.call(this,this.options.anchor),"anchor",this),this.commands.push(t)):"fontsize"===n?(t=g(new e.extensions.fontSize,n,this),this.commands.push(t)):i.hasOwnProperty(n)&&(t=g(new e.extensions.button(i[n]),n,this),this.commands.push(t))},this);for(n in r)r.hasOwnProperty(n)&&-1===o.indexOf(n)&&(t=g(r[n],n,this),this.commands.push(t));if(this.options.extensions.paste||this.commands.push(g(P.call(this,this.options.paste),"paste",this)),v.call(this)&&this.commands.push(g(D.call(this,this.options.anchorPreview),"anchor-preview",this)),y.call(this)&&this.commands.push(g(new e.extensions.autoLink,"auto-link",this)),C.call(this)&&this.commands.push(g(new e.extensions.imageDragging,"image-dragging",this)),w.call(this)){var a="string"==typeof this.options.placeholder?{}:this.options.placeholder;this.commands.push(g(N.call(this,a),"placeholder",this))}}function F(e,i){var n=[["forcePlainText","paste.forcePlainText"],["cleanPastedHTML","paste.cleanPastedHTML"],["anchorInputPlaceholder","anchor.placeholderText"],["checkLinkFormat","anchor.linkValidation"],["anchorButton","anchor.customClassOption"],["anchorButtonClass","anchor.customClassOption"],["anchorTarget","anchor.targetCheckbox"],["anchorInputCheckboxLabel","anchor.targetCheckboxText"],["anchorPreviewHideDelay","anchorPreview.hideDelay"],["disableAnchorPreview","anchorPreview: false"],["disablePlaceholders","placeholder: false"],["onShowToolbar","showToolbar custom event"],["onHideToolbar","hideToolbar custom event"]];return i&&(n.forEach(function(e){i.hasOwnProperty(e[0])&&void 0!==i[e[0]]&&t.deprecated(e[0],e[1],"v5.0.0")}),i.hasOwnProperty("placeholder")&&"string"==typeof i.placeholder&&t.deprecated("placeholder","placeholder.text","v5.0.0")),t.defaults({},i,e)}function B(e,i){var n,o=/^append-(.+)$/gi;return n=o.exec(e),n?t.execFormatBlock(this.options.ownerDocument,n[1]):"fontSize"===e?this.options.ownerDocument.execCommand("fontSize",!1,i.size):"createLink"===e?this.createLink(i):"image"===e?this.options.ownerDocument.execCommand("insertImage",!1,this.options.contentWindow.getSelection()):this.options.ownerDocument.execCommand(e,!1,null)}e.statics={ButtonsData:i,DefaultButton:s,AnchorExtension:l,FontSizeExtension:h,Toolbar:x,AnchorPreview:c},e.Extension=o,e.extensions=k,e.util=t,e.selection=r,e.prototype={defaults:n,init:function(e,t){var i=1;for(this.options=F.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body);this.options.elementsContainer.querySelector("#medium-editor-toolbar-"+i);)i+=1;return this.id=i,this.setup()},setup:function(){this.isActive||(f.call(this,this.origElements),0!==this.elements.length&&(this.events=new a(this),this.isActive=!0,S.call(this),M.call(this),T.call(this),A.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.commands.forEach(function(e){"function"==typeof e.destroy?e.destroy():"function"==typeof e.deactivate&&(t.warn("Extension .deactivate() function has been deprecated. Use .destroy() instead. This will be removed in version 5.0.0"),e.deactivate())},this),void 0!==this.toolbar&&(this.toolbar.destroy(),delete this.toolbar),this.events.destroy(),this.elements.forEach(function(e){if(this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-element"),e.removeAttribute("medium-editor-index"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.hasAttribute("medium-editor-textarea-id")){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&t.classList.remove("medium-editor-hidden"),e.parentNode&&e.parentNode.removeChild(e)}},this),this.elements=[])},on:function(e,t,i,n){this.events.attachDOMEvent(e,t,i,n)},off:function(e,t,i,n){this.events.detachDOMEvent(e,t,i,n)},subscribe:function(e,t){this.events.attachCustomEvent(e,t)},unsubscribe:function(e,t){this.events.detachCustomEvent(e,t)},createEvent:function(){t.warn(".createEvent() has been deprecated and is no longer needed. You can attach and trigger custom events without calling this method.  This will be removed in v5.0.0")},trigger:function(e,t,i){this.events.triggerCustomEvent(e,t,i)},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,i={};for(e=0;e<this.elements.length;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,i[t]={value:this.elements[e].innerHTML.trim()};return i},getExtensionByName:function(e){var t;return this.commands&&this.commands.length&&this.commands.some(function(i){return i.name===e?(t=i,!0):!1}),t},callExtensions:function(e){if(!(arguments.length<1)){var t,i,n=Array.prototype.slice.call(arguments,1);for(i in this.options.extensions)this.options.extensions.hasOwnProperty(i)&&(t=this.options.extensions[i],void 0!==t[e]&&t[e].apply(t,n));return this}},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){return this.toolbar&&this.toolbar.checkState(),this},queryCommandState:function(e){var t,i=/^full-(.+)$/gi,n=null;t=i.exec(e),t&&(e=t[1]);try{n=this.options.ownerDocument.queryCommandState(e)}catch(o){n=null}return n},execAction:function(e,i){var n,o,r=/^full-(.+)$/gi;return n=r.exec(e),n?(this.saveSelection(),this.selectAllContents(),o=B.call(this,n[1],i),this.restoreSelection()):o=B.call(this,e,i),("insertunorderedlist"===e||"insertorderedlist"===e)&&t.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),o},getSelectedParentElement:function(e){return void 0===e&&(e=this.options.contentWindow.getSelection().getRangeAt(0)),r.getSelectedParentElement(e)},hideToolbarDefaultActions:function(){return this.toolbar&&this.toolbar.hideToolbarDefaultActions(),this},setToolbarPosition:function(){this.toolbar&&this.toolbar.setToolbarPosition()},selectAllContents:function(){var e=r.getSelectionElement(this.options.contentWindow);if(e){for(;1===e.children.length;)e=e.children[0];this.selectElement(e)}},selectElement:function(e){r.selectNode(e,this.options.ownerDocument);var t=r.getSelectionElement(this.options.contentWindow);t&&this.events.focusElement(t)},getFocusedElement:function(){var e;return this.elements.some(function(t){return!e&&t.getAttribute("data-medium-focused")&&(e=t),!!e},this),e},exportSelection:function(){var e,i,n,o=null,a=this.options.contentWindow.getSelection(),s=-1;if(a.rangeCount>0&&(e=a.getRangeAt(0),i=e.cloneRange(),this.elements.some(function(i,n){return i===e.startContainer||t.isDescendant(i,e.startContainer)?(s=n,!0):!1}),s>-1&&(i.selectNodeContents(this.elements[s]),i.setEnd(e.startContainer,e.startOffset),n=i.toString().length,o={start:n,end:n+e.toString().length,editableElementIndex:s},0!==n))){var l=r.getIndexRelativeToAdjacentEmptyBlocks(this.options.ownerDocument,this.elements[s],e.startContainer,e.startOffset);0!==l&&(o.emptyBlocksIndex=l)}return null!==o&&0===o.editableElementIndex&&delete o.editableElementIndex,o},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(e,i){if(e){var n,o,a,s,l=void 0===e.editableElementIndex?0:e.editableElementIndex,c={editableElementIndex:l,start:e.start,end:e.end},h=this.elements[c.editableElementIndex],d=0,u=this.options.ownerDocument.createRange(),m=[h],p=!1,f=!1;for(u.setStart(h,0),u.collapse(!0),n=m.pop();!f&&n;){if(3===n.nodeType)s=d+n.length,!p&&c.start>=d&&c.start<=s&&(u.setStart(n,c.start-d),p=!0),p&&c.end>=d&&c.end<=s&&(u.setEnd(n,c.end-d),f=!0),d=s;else for(o=n.childNodes.length-1;o>=0;)m.push(n.childNodes[o]),o-=1;f||(n=m.pop())}if(e.emptyBlocksIndex){for(var b=t.getBlockContainer(u.startContainer),g=0;g<e.emptyBlocksIndex&&b.nextSibling&&(b=b.nextSibling,g++,!(b.textContent.length>0)););u.setStart(t.getFirstSelectableLeafNode(b),0)}i&&(u=r.importSelectionMoveCursorPastAnchor(c,u)),a=this.options.contentWindow.getSelection(),a.removeAllRanges(),a.addRange(u)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(e){var i,n;if(e.url&&e.url.trim().length>0&&(this.options.ownerDocument.execCommand("createLink",!1,e.url),(this.options.targetBlank||"_blank"===e.target)&&t.setTargetBlank(r.getSelectionStart(this.options.ownerDocument),e.url),e.buttonClass&&t.addClassToAnchors(r.getSelectionStart(this.options.ownerDocument),e.buttonClass)),this.options.targetBlank||"_blank"===e.target||e.buttonClass)for(i=this.options.ownerDocument.createEvent("HTMLEvents"),i.initEvent("input",!0,!0,this.options.contentWindow),n=0;n<this.elements.length;n+=1)this.elements[n].dispatchEvent(i)},activate:function(){t.deprecatedMethod.call(this,"activate","setup",arguments,"v5.0.0")},deactivate:function(){t.deprecatedMethod.call(this,"deactivate","destroy",arguments,"v5.0.0")},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)}}}(),e.version=function(e,t,i){return{major:parseInt(e,10),minor:parseInt(t,10),revision:parseInt(i,10),toString:function(){return[e,t,i].join(".")}}}.apply(this,{version:"4.12.7"}.version.split(".")),e}())},function(e,t,i){var n=i(5);"string"==typeof n&&(n=[[e.id,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n=i(6);"string"==typeof n&&(n=[[e.id,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)},function(e,t,i){var n=i(7);"string"==typeof n&&(n=[[e.id,n,""]]);i(2)(n,{});n.locals&&(e.exports=n.locals)}]);
//# sourceMappingURL=bundle.js.map